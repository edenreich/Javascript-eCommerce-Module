"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_get=function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in s)return s.value;var r=s.get;return void 0!==r?r.call(i):void 0},_createClass=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Str=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"kebabCase",value:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},{key:"random",value:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}},{key:"ucfirst",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}]),t}(),debugLevel=void 0,ExceptionHandler=function(){function t(){_classCallCheck(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor.name)}return _createClass(t,null,[{key:"setDebugLevel",set:function(t){"warning"!=t&&"info"!=t||(window.onerror=function(){return!0}),debugLevel=t}}]),_createClass(t,[{key:"stackTrace",value:function(t,e){switch(this.customActions(t,e),debugLevel){case"error":this.handleErrors(t,e);break;case"warning":this.handleWarnings(t,e);break;case"info":default:this.handleInfos(t,e)}}},{key:"customActions",value:function(t,e){if("InvalidArgumentException"==t.constructor.name);else if("InvalidBindingException"==t.constructor.name);else if("BadEventCallException"==t.constructor.name);else if("ComponentsException"==t.constructor.name);else if("ComponentNotRegisteredException"==t.constructor.name);else if("NotInPageRangeException"!=t.constructor.name)return!1;return!1}},{key:"handleErrors",value:function(t,e){console.error(t.constructor.name+": "+e)}},{key:"handleWarnings",value:function(t,e){console.warn(t.constructor.name+": "+e)}},{key:"handleInfos",value:function(t,e){console.info(t.constructor.name+": "+e)}}]),t}(),defaultMessage="An invalid argument was passed.",InvalidArgumentException$1=function(t){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,n),t=t||defaultMessage;var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return _get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"stackTrace",e).call(e,e,t),e}return _inherits(n,ExceptionHandler),n}(),DOM=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"minifyCss",value:function(t){return t=(t=(t=(t=(t=t.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"")).replace(/ {2,}/g," ")).replace(/([{:}])/g,"$1")).replace(/([;,]) /g,"$1")).replace(/ !/g,"!")}},{key:"switchClasses",value:function(t,e,n){this.removeClass(t,e),this.addClass(t,n)}},{key:"addClass",value:function(e,t){if(null===e)throw new InvalidArgumentException$1;return t&&""!=t&&void 0!==(void 0===t?"undefined":_typeof(t))&&t.split(" ").forEach(function(t){e.classList.add(t)}),e}},{key:"hasClass",value:function(t,e){if(null===t)throw new InvalidArgumentException$1("hasClass() expects the first argument to be an HTMLElement but null was passed.");if(e&&""!=e&&void 0!==e)return-1!=t.className.indexOf(e)}},{key:"removeClass",value:function(e,t){if(null==e)throw new InvalidArgumentException$1;""==t?e.className="":t.split(" ").forEach(function(t){e.classList.remove(t)});return e}},{key:"remove",value:function(t){t.parentNode.removeChild(t)}},{key:"addStyle",value:function(t,e){if("string"!=typeof e)throw new InvalidArgumentException$1;var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style"),s=this.minifyCss(e);i.innerHTML=s,i.setAttribute("id",t),n.appendChild(i)}},{key:"addLinkedStyle",value:function(t,e){if("string"!=typeof e)throw new InvalidArgumentException$1("DOM.addLinkedStyle() excpects the second parameter to be string, but "+(void 0===e?"undefined":_typeof(e))+" was passed instead.");var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("link");i.setAttribute("id",t),i.setAttribute("href",e),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),n.appendChild(i)}},{key:"createElement",value:function(t,e){var n=document.createElement(t);if(void 0===e)return n;for(var i in e)switch(i){case"text":case"html":n.innerHTML=e[i];break;default:n.setAttribute(i,e[i])}return n}},{key:"toggleClass",value:function(t,e,n){if(null==t||void 0===t)throw new InvalidArgumentException$1;return(n=n||void 0)&&t.classList.toggle(n),t.classList.toggle(e)}},{key:"find",value:function(t){return queryElement(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.document)}},{key:"documentHeight",value:function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}},{key:"windowHeight",value:function(){return window.innerHeight||(document.documentElement||document.body).clientHeight}},{key:"scrollYOffset",value:function(){return window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop}}]),t}();function queryElement(t,e){if("string"!=typeof t)throw new InvalidArgumentException$1("queryElement() expects first parameter to be a string, but "+(void 0===t?"undefined":_typeof(t))+" was passed instead.");var n=e.querySelectorAll(t);return 0==n.length?null:1<n.length?n:n[0]}function hasChild(t,e){for(var n=e.parentNode;null!=n;){if(n==t)return!0;n=n.parentNode}return!1}var Common=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"extend",value:function(t,e){var n,i={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}},{key:"in_array",value:function(t,e){if(void 0===e||e.constructor!==Array)throw new InvalidArgumentException$1("Common.in_array() expects the second parameter to be an array, but "+(void 0===e?"undefined":_typeof(e))+" was passd instead");for(var n=0;n<=e.length;n++)if(t==e[n])return!0;return!1}},{key:"array_chunk",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5;if(isNaN(e))throw new InvalidArgumentException$1("Common.array_chunk() expects the second parameter to be a number, but "+(void 0===e?"undefined":_typeof(e))+" passed instead.");e=parseInt(e);var n=void 0,i=[];for(n=0;n<Math.ceil(t.length/e);n++){var s=n*e,o=s+e;i.push(t.slice(s,o))}return i}},{key:"emptyObject",value:function(t){for(var e in t)return!1;return!0}},{key:"containsObject",value:function(t,e){var n=void 0;for(n=0;n<e.length;n++){if("string"==typeof t&&e[n].constructor.name===t)return!0;if(e[n]===t)return!0}return!1}},{key:"isObject",value:function(t){return"object"==(void 0===t?"undefined":_typeof(t))}}]),t}(),defaultMessage$1="The data structure is invalid",InvalidDataStructureException=function(t){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,n),t=t||defaultMessage$1;var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return _get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"stackTrace",e).call(e,e,t),e}return _inherits(n,ExceptionHandler),n}(),defaultSettings={headers:{"Content-Type":"application/json"},async:!0},Request=function(){function e(t){_classCallCheck(this,e),this.settings=Common.extend(defaultSettings,t),this.setDefaultRequestHeader()}return _createClass(e,[{key:"setDefaultRequestHeader",value:function(){var e=void 0,n=this.settings.headers,i=this.settings.async,s=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.open=function(){var t=s.apply(this,arguments,i);for(e in n)this.setRequestHeader(e,n[e]);return t}}},{key:"post",value:function(i){var s=this.xhr;return i.hasOwnProperty("before")&&"function"==typeof i.before&&i.before.call(this),new Promise(function(t,e){if("object"!==(void 0===i?"undefined":_typeof(i)))throw new Error("get expecting a json object to be passed as an argument, but "+(void 0===i?"undefined":_typeof(i))+" was passed.");if(i.data=i.data||{},"object"!==_typeof(i.data))throw new Error("data property expecting a json object to be passed as an argument, but "+_typeof(i.data)+" was passed.");s.open("POST",i.url,!0),s.responseType=i.dataType||"json",s.timeout=i.timeout||3e3,s.onreadystatechange=function(){4==this.readyState&&400<=this.status&&this.status<=500&&e(this.responseText),4==this.readyState&&200==this.status&&(t(this.response),i.hasOwnProperty("after")&&"function"==typeof i.after&&i.after.call(this))},s.onerror=function(t){i.hasOwnProperty("error")&&"function"==typeof i.error&&i.error(t),e(t)},i.data||s.send(null);var n=Object.keys(i.data).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(i.data[t])}).join("&");s.send(n)})}},{key:"get",value:function(i){var s=new XMLHttpRequest||new ActiveXObject("Microsoft.XMLHTTP");return i.hasOwnProperty("before")&&"function"==typeof i.before&&i.before.call(this),new Promise(function(e,n){if("object"!==(void 0===i?"undefined":_typeof(i)))throw new Error("get expecting a json object to be passed as an argument, but "+(void 0===i?"undefined":_typeof(i))+" was passed.");if(i.data=i.data||{},"object"!==_typeof(i.data))throw new Error("data property expecting a json object to be passed as an argument, but "+_typeof(i.data)+" was passed.");s.open("GET",i.url,!0),s.responseType=i.dataType||"json",s.timeout=i.timeout||3e3,"json"==s.responseType&&(s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Accept","application/json")),"document"==s.responseType&&(s.overrideMimeType("text/xml"),s.setRequestHeader("Content-Type","text/html"),s.setRequestHeader("Accept","text/html")),s.onreadystatechange=function(){if(4==this.readyState&&400<=this.status&&this.status<=500&&n(this.responseText),4==this.readyState&&200==this.status){var t=this.response||this.responseText;t="json"==s.responseType&&"object"!=(void 0===t?"undefined":_typeof(t))?JSON.parse(t):t,e(t),i.hasOwnProperty("after")&&"function"==typeof i.after&&i.after.call(this)}},s.onabort=s.onerror=function(t){i.hasOwnProperty("error")&&"function"==typeof i.error&&i.error(t),n(t)},i.data||s.send(null);var t=Object.keys(i.data).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(i.data[t])}).join("&");s.send(t)})}}]),e}(),Url=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"processAjaxData",value:function(t,e,n){var i=DOM.find(t);i.innerHTML=e;var s=DOM.find("title",i);document.title=s.innerHTML,window.history.pushState({html:e,pageTitle:s.innerHTML},"",n)}},{key:"changeQueryParameterValue",value:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"=",s=new RegExp("([?&])"+e+i+".*?(&|$)","i"),o=-1!==t.indexOf("?")?"&":"?";return t.match(s)?t.replace(s,"$1"+e+i+n+"$2"):t+o+e+i+n}},{key:"changeParameter",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"=";e=e||this.queryString()[t];var i=this.changeQueryParameterValue(window.location.href,t,e,n);window.history.replaceState("","",i)}},{key:"change",value:function(t){"/"!=t.charAt(0)&&(t="/"+t);var e=window.location.pathname;window.history.pushState({previous:e},"",t)}},{key:"queryString",value:function(){var i={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,e,n){i[e]=n});return i}},{key:"hasParameters",value:function(t){return 0<=t.indexOf("?")}}]),t}(),Router=function(){function e(t){_classCallCheck(this,e),this.container=t,this.routes=this.buildRoutes(),this.hash="##","undefined"!=typeof history&&history.replaceState({previous:"/"},"",window.location.pathname),window.addEventListener("hashchange",this.register.bind(this)),window.addEventListener("popstate",this.register.bind(this)),window.addEventListener("touchstart",this.register.bind(this)),window.addEventListener("click",this.register.bind(this))}return _createClass(e,[{key:"register",value:function(t){var e=this.parseUrl();if(this.hashNavigation){var n=this.hash+e+"?"+this.queryString;void 0!==t&&"popstate"==t.type&&Url.change(n)}void 0===t?this.parseHttpRequest(e):this.parseEvent(t,e)}},{key:"parseUrl",value:function(){var t=window.location.href;if(Url.hasParameters(t)){var e=t.split("?");this.queryString=e[1],t=e[0].replace(window.location.protocol+"//"+window.location.host,""),this.current=t}return 0<=t.indexOf(this.hash)&&(t=window.location.pathname.replace(this.hash,"")),this.hashNavigation&&Url.change(this.hash+t+"?"+this.queryString),t}},{key:"parseHttpRequest",value:function(t){this.current=t,this.dispatch(t)}},{key:"parseEvent",value:function(t,e){switch(t.type){case"touchstart":case"click":if(t.preventDefault(),"a"!=t.target.tagName.toLowerCase()||DOM.hasClass(t.target,"page-item")||DOM.hasClass(t.target,"page-link"))return;void 0!==t.target.pathname&&(e=t.target.pathname);break;case"popstate":void 0!==t.state&&(e=t.state.previous);break;case"hashchange":e=window.location.pathname.replace(this.hash,"")}this.container.Events.subscribe("route.dispatched",function(t){this.hashNavigation&&(t=this.hash+t),Url.change(t)}.bind(this)),this.current=e,this.dispatch(e)}},{key:"dispatch",value:function(t){if(console.log(t),-1==this.routes.indexOf(t))throw new Error("No matching route found!");switch(t){case"/":case"/home":console.log("home"),this.container.Products.hideAll(),this.container.Filter.show(),this.container.Products.show(),this.container.Cart.show(),this.container.Pagination.show();break;case"/checkout":console.log("checkout"),this.container.Checkout.hideAll(),this.container.Checkout.show();break;case"/info/:product":console.log("single product info page"),this.container.Details.hideAll(),this.container.Details.show();break;default:console.log("default route")}this.container.Events.publish("route.dispatched",t)}},{key:"hashNavigation",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.hashNavigation=t,this}},{key:"buildRoutes",value:function(){return["/","/home","/checkout","/info/:product"]}}]),e}(),defaultMessage$2="The event you called does not exists or you supplied wrong argument",BadEventCallException=function(t){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,n),t=t||defaultMessage$2;var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return _get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"stackTrace",e).call(e,e,t),e}return _inherits(n,ExceptionHandler),n}(),EventManager=function(){function t(){_classCallCheck(this,t),this.events={}}return _createClass(t,[{key:"subscribe",value:function(t,e){if("function"!=typeof e)throw new InvalidArgumentException;void 0===this.events[t]&&(this.events[t]=[]),this.events[t].push(e)}},{key:"publish",value:function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n=n||null,void 0!==this.events[t]&&this.events[t].forEach(function(t){if("function"!=typeof t)throw new InvalidArgumentException("subscribe() should recieve callback as second parameter, but "+(void 0===t?"undefined":_typeof(t))+" was passed");return t.apply(void 0,_toConsumableArray(n))})}}]),t}(),Cookie=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"set",value:function(t,e,n){"Object"!=e.constructor.name&&"Array"!=e.constructor.name||(e=JSON.stringify(e));var i=void 0;if(n=n||10){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),i="; expires="+s.toGMTString()}else i="";document.cookie=t+"="+e+i+"; path=/"}},{key:"get",value:function(t){if(0<document.cookie.length){var e=document.cookie.indexOf(t+"=");if(-1!=e){e=e+t.length+1;var n=document.cookie.indexOf(";",e);return-1==n&&(n=document.cookie.length),JSON.parse(unescape(document.cookie.substring(e,n)))}}return{}}}]),t}(),BaseComponent=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"hide",value:function(){void 0!==this.element&&(this.element.style.display="none")}},{key:"show",value:function(){void 0!==this.element&&(this.element.style.display="block")}},{key:"empty",value:function(){void 0!==this.element&&(this.element.innerHTML="")}}]),t}(),defaultMessage$3="The item you are trying to add must contain a unique id",InvalidCartItemException=function(t){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,n),t=t||defaultMessage$3;var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return _get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"stackTrace",e).call(e,e,t),e}return _inherits(n,ExceptionHandler),n}(),defaultSettings$1={element:".cart",cookie_name:"cart",preview_class:"",loader:"",class:"",width:"60px",height:"60px",placement:"right-top",fixed:!0,hover_color:"orange",no_css:!1},Container=void 0,EventManager$2=void 0,Http=void 0,_loadingOverlay=void 0,itemsDiv=void 0,Cart=function(t){function s(t,e,n){_classCallCheck(this,s);var i=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));return Container=t,Http=e,EventManager$2=n,i.previewElement=i.createPreviewElement(),i.icon=createIcon.call(i),i}return _inherits(s,BaseComponent),_createClass(s,[{key:"setup",value:function(t){if("object"!=(void 0===t?"undefined":_typeof(t)))throw new InvalidArgumentException$1;this.settings=Common.extend(defaultSettings$1,t),this.setElement(this.settings.element),DOM.addClass(this.previewElement,"closed"),DOM.addClass(this.previewElement,this.settings.preview_class),this.draw(),this.bindEventListeners(),this.isEmpty(Cookie.get(this.settings.cookie_name))&&this.setupCart()}},{key:"isEmpty",value:function(t){return Common.emptyObject(t)}},{key:"setupCart",value:function(){this.cart={},this.cart.id=Str.random(10),this.cart.items=[],this.cart.favorites=[],Cookie.set(this.settings.cookie_name,this.cart,2)}},{key:"addItem",value:function(t){if("object"!=(void 0===t?"undefined":_typeof(t)))throw new InvalidArgumentException$1("addItem() expect the first parameter to be an object, but "+(void 0===t?"undefined":_typeof(t))+" was passed instead");if(!t.hasOwnProperty("id"))throw new InvalidCartItemException;this.cart=Cookie.get(this.settings.cookie_name),t.hasOwnProperty("quantity")||(t.quantity=1);var e=void 0,n=!1;for(e=0;e<this.cart.items.length;e++)if(this.cart.items[e].id==t.id){this.cart.items[e].quantity++,n=!0;break}n||this.cart.items.push(t),Cookie.set(this.settings.cookie_name,this.cart,2)}},{key:"favoriteItem",value:function(t){if("object"!=(void 0===t?"undefined":_typeof(t)))throw new InvalidArgumentException$1("favoriteItem() expect the first parameter to be an object, but "+(void 0===t?"undefined":_typeof(t))+" was passed instead");if(!t.hasOwnProperty("id"))throw new InvalidCartItemException;this.cart=Cookie.get(this.settings.cookie_name);var e=void 0,n=!1;for(e=0;e<this.cart.favorites.length;e++)if(this.cart.favorites[e].id==t.id){n=!0;break}n||this.cart.favorites.push(t),Cookie.set(this.settings.cookie_name,this.cart,2)}},{key:"removeItem",value:function(t){if("object"!=(void 0===t?"undefined":_typeof(t)))throw new InvalidArgumentException$1("removeItem() expect the first parameter to be an object, but "+(void 0===t?"undefined":_typeof(t))+" was passed instead");if(!t.hasOwnProperty("id"))throw new InvalidCartItemException;this.cart=Cookie.get(this.settings.cookie_name);var e=void 0;for(e=0;e<this.cart.items.length;e++)if(this.cart.items[e].id==t.id){this.cart.items.splice(e,1);break}Cookie.set(this.settings.cookie_name,this.cart,2)}},{key:"addToPreview",value:function(t){itemsDiv.innerHTML="";var e=DOM.createElement("table");DOM.addClass(e,"preview-table");for(var n=0;n<t.length;n++){var i=t[n],s=DOM.createElement("tr",{class:"item"}),o=DOM.createElement("td");for(var r in o.innerHTML=i.quantity+"x",s.appendChild(o),i){switch(r){case"image":o=DOM.createElement("td");var a=DOM.createElement("img",{src:i[r],width:"50px",height:"50px"});o.appendChild(a);break;case"price":o=DOM.createElement("td");var c=DOM.createElement("span",{html:"&nbsp"+i[r].currency});o.innerHTML=i[r].amount,o.appendChild(c);break;case"name":(o=DOM.createElement("td")).innerHTML=i[r]}s.appendChild(o)}e.appendChild(s)}var l=DOM.createElement("tr"),u=DOM.createElement("td",{colspan:"3"}),d=DOM.createElement("a",{class:"btn btn-primary",text:"Checkout",href:"/checkout"});u.appendChild(d),l.appendChild(u),u=DOM.createElement("td",{colspan:"1"});var h=DOM.createElement("div",{class:"cart-total",text:this.total()});u.appendChild(h),l.appendChild(u),e.appendChild(l),itemsDiv.appendChild(e)}},{key:"total",value:function(){this.cart=Cookie.get(this.settings.cookie_name);var t=0,e=void 0;for(e=0;e<this.cart.items.length;e++)t+=parseFloat(this.cart.items[e].price.amount)*this.cart.items[e].quantity;return t.toFixed(2)}},{key:"setElement",value:function(t){this.element=DOM.find(t),this.element&&(DOM.addClass(this.element,this.settings.class),DOM.addClass(this.element,this.settings.placement),this.element.appendChild(this.icon),this.element.appendChild(this.previewElement))}},{key:"createPreviewElement",value:function(){var t=DOM.createElement("div",{id:"preview"});return itemsDiv=DOM.createElement("ul",{class:"items"}),t.appendChild(itemsDiv),t}},{key:"draw",value:function(){if(!DOM.find("#Turbo-eCommerce-Cart")&&!this.settings.no_css){var t=this.settings.fixed?"fixed":"absolute",e="\n\t\t\t"+this.settings.element+" {\n\t\t\t\tposition: "+t+";\n\t\t\t\tcursor: pointer;\n\t\t\t\tcolor: #ffffff;\n\t\t\t\tz-index: 998;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" svg {\n\t\t\t\twidth: "+this.settings.width+";\n\t\t\t\theight: "+this.settings.height+";\n\t\t\t\ttransition: fill 0.3s;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" svg:hover {\n\t\t\t\tfill: "+this.settings.hover_color+";\n\t\t\t\ttransition: fill 0.3s;\n\t\t\t}\n\n\t\t\t"+this.settings.element+".top-right,\n\t\t\t"+this.settings.element+".right-top {\n\t\t\t\tright: 10px;\n\t\t\t\ttop: 10px;\n\t\t\t}\n\n\t\t\t"+this.settings.element+".left-top,\n\t\t\t"+this.settings.element+".top-left {\n\t\t\t\tleft: 10px;\n\t\t\t\ttop: 10px;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" > #preview {\n\t\t\t\tposition: "+t+";\n\t\t\t\tz-index: 9999;\n\t\t\t\ttop: calc(10px + "+this.settings.height+");\n\t\t\t\ttransform: translateX(60px);\n\t\t\t\theight: 400px;\n\t\t\t\twidth: 300px;\n\t\t\t\tborder: 1px solid #e4e4e4;\n\t\t\t\tbackground: #ffffff;\n\t\t\t\ttransition: transform 1s, visibility 1s;\n\t\t\t\tcursor: default;\n\t\t\t\toverflow-Y: scroll;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" > #preview.opened {\n\t\t\t\tvisibility: visible;\n\t\t\t\ttransform: translateX(-240px);\n\t\t\t}\n\n\t\t\t"+this.settings.element+" > #preview.closed {\n\t\t\t\tvisibility: hidden;\n\t\t\t\ttransform: translateX(60px);\n\t\t\t}\n\n\t\t\t"+this.settings.element+" #preview > ul.items {\n\t\t\t\tpadding: 0;\n\t\t\t\tcolor: #000000;\n\t\t\t\tlist-style-type: none;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" #preview > ul.items > .preview-table {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" #preview > ul.items > .preview-table td {\n\t\t\t\tpadding: 4px;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" .items.loading {\n\t\t\t\tdisplay: none;\n\t\t\t\toverflow-Y: none;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" .cart-loader-overlay {\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: 0; \n\t\t\t    left: 0;\n\t\t\t    right: 0;\n\t\t\t    bottom: 0;\n\t\t\t\tbackground: #ffffff;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tmin-height: 100%;\n\t\t\t\toverflow: auto;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" .cart-loader-overlay .cart-loader {\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 50px;\n\t\t\t\theight: 50px;\n\t\t\t\tmargin-left: -25px;\n\t\t\t\tmargin-top: -25px;\n\t\t\t\tleft: 50%;\n\t\t\t\tright: 50%;\n\t\t\t\ttop: 50%;\n\t\t\t\tbottom: 50%;\n\t\t\t}\n\t\t";DOM.addStyle("Turbo-eCommerce-Cart",e)}}},{key:"loadingOverlay",value:function(){if(_loadingOverlay)return _loadingOverlay;var t=void 0;return t=this.settings.loader?DOM.createElement("img",{src:this.settings.loader,class:"cart-loader"}):createLoader(),(_loadingOverlay=DOM.createElement("div",{class:"cart-loader-overlay"})).appendChild(t),_loadingOverlay}},{key:"previewStartLoading",value:function(){DOM.addClass(itemsDiv,"loading"),this.previewElement.appendChild(this.loadingOverlay())}},{key:"previewStopLoading",value:function(){DOM.find(".cart-loader-overlay",this.previewElement)&&(this.previewElement.removeChild(this.loadingOverlay()),DOM.removeClass(itemsDiv,"loading"))}},{key:"reloadCartPreview",value:function(){this.previewStartLoading();var t=this.getCartItems();this.addToPreview(t);var e=this;setTimeout(function(){e.previewStopLoading.call(e)},1e3)}},{key:"bindEventListeners",value:function(){this.icon.onclick=function(t){t.preventDefault(),this.toggleCartPreview()}.bind(this),EventManager$2.subscribe("cart.product.added",function(t){this.openCartPreview(),this.addItem(t),this.reloadCartPreview()}.bind(this)),EventManager$2.subscribe("cart.product.favorited",function(t){this.favoriteItem(t)}.bind(this))}},{key:"openCartPreview",value:function(){DOM.hasClass(this.previewElement,"opened")&&this.reloadCartPreview(),DOM.switchClasses(this.previewElement,"closed","opened"),this.reloadCartPreview()}},{key:"toggleCartPreview",value:function(){DOM.toggleClass(this.previewElement,"opened","closed")&&this.reloadCartPreview()}},{key:"getCartItems",value:function(){var t=Cookie.get(this.settings.cookie_name);return t?t.items:[]}}]),s}();function close(t){t.preventDefault(),DOM.switchClasses(this.previewElement,"opened","closed")}function createIcon(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("version","1.1"),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.setAttribute("x","0px"),t.setAttribute("y","0px"),t.setAttribute("width","40px"),t.setAttribute("height","40px"),t.setAttribute("viewBox","0 0 446.843 446.843"),t.setAttribute("style","enable-background:new 0 0 446.843 446.843;"),t.setAttribute("xml:space","preserve"),n.setAttribute("d","M444.09,93.103c-2.698-3.699-7.006-5.888-11.584-5.888H109.92c-0.625,0-1.249,0.038-1.85,0.119l-13.276-38.27c-1.376-3.958-4.406-7.113-8.3-8.646L19.586,14.134c-7.374-2.887-15.695,0.735-18.591,8.1c-2.891,7.369,0.73,15.695,8.1,18.591l60.768,23.872l74.381,214.399c-3.283,1.144-6.065,3.663-7.332,7.187l-21.506,59.739c-1.318,3.663-0.775,7.733,1.468,10.916c2.24,3.183,5.883,5.078,9.773,5.078h11.044c-6.844,7.616-11.044,17.646-11.044,28.675c0,23.718,19.298,43.012,43.012,43.012s43.012-19.294,43.012-43.012c0-11.029-4.2-21.059-11.044-28.675h93.776c-6.847,7.616-11.048,17.646-11.048,28.675c0,23.718,19.294,43.012,43.013,43.012c23.718,0,43.012-19.294,43.012-43.012c0-11.029-4.2-21.059-11.043-28.675h13.433c6.599,0,11.947-5.349,11.947-11.948c0-6.599-5.349-11.947-11.947-11.947H143.647l13.319-36.996c1.72,0.724,3.578,1.152,5.523,1.152h210.278c6.234,0,11.751-4.027,13.65-9.959l59.739-186.387C447.557,101.567,446.788,96.802,444.09,93.103z M169.659,409.807c-10.543,0-19.116-8.573-19.116-19.116s8.573-19.117,19.116-19.117s19.116,8.574,19.116,19.117S180.202,409.807,169.659,409.807z M327.367,409.807c-10.543,0-19.117-8.573-19.117-19.116s8.574-19.117,19.117-19.117c10.542,0,19.116,8.574,19.116,19.117S337.909,409.807,327.367,409.807z M402.52,148.149h-73.161V115.89h83.499L402.52,148.149z M381.453,213.861h-52.094v-37.038h63.967L381.453,213.861z M234.571,213.861v-37.038h66.113v37.038H234.571z M300.684,242.538v31.064h-66.113v-31.064H300.684z M139.115,176.823h66.784v37.038h-53.933L139.115,176.823z M234.571,148.149V115.89h66.113v32.259H234.571z M205.898,115.89v32.259h-76.734l-11.191-32.259H205.898z M161.916,242.538h43.982v31.064h-33.206L161.916,242.538z M329.359,273.603v-31.064h42.909l-9.955,31.064H329.359z"),e.appendChild(n),t.appendChild(e);var i=DOM.createElement("div",{id:"cartIcon"});return i.appendChild(t),i}function createLoader(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=[],n=[],i=[];t.setAttribute("class","lds-spinner"),t.setAttribute("width","200px"),t.setAttribute("height","200px"),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.setAttribute("viewBox","0 0 100 100"),t.setAttribute("preserveAspectRatio","xMidYMid"),t.setAttribute("style","background: none;");for(var s=0,o=0;o<12;o++){var r=document.createElementNS("http://www.w3.org/2000/svg","g");r.setAttribute("transform","rotate("+s+" 50 50)"),s+=30,e.push(r)}for(o=0;o<12;o++){var a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("x","47"),a.setAttribute("y","24"),a.setAttribute("rx","9.4"),a.setAttribute("ry","4.8"),a.setAttribute("width","6"),a.setAttribute("height","12"),a.setAttribute("fill","#4658ac"),n.push(a)}var c=.99;for(o=0;o<12;o++){var l=document.createElementNS("http://www.w3.org/2000/svg","animate");l.setAttribute("attributeName","opacity"),l.setAttribute("values","1;0"),l.setAttribute("times","0;1"),l.setAttribute("dur","1s"),l.setAttribute("begin",c.toFixed(8)+"s"),l.setAttribute("repeatCount","indefinite"),i.push(l),c-=.09}for(o=0;o<e.length;o++){var u=e[o],d=n[o],h=i[o];d.appendChild(h),u.appendChild(d),t.appendChild(u)}return DOM.addClass(t,"cart-loader"),t}var defaultSettings$2={element:".filter",class:"",width:"",height:"",no_css:!1},Container$1=void 0,Filter=function(t){function n(t){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return Container$1=t,e}return _inherits(n,BaseComponent),_createClass(n,[{key:"setup",value:function(t){if("object"!=(void 0===t?"undefined":_typeof(t)))throw new InvalidArgumentException$1;this.settings=Common.extend(defaultSettings$2,t),document.addEventListener("DOMContentLoaded",function(){this.setElement(this.settings.element),this.draw()}.bind(this))}},{key:"setElement",value:function(t){this.element=DOM.find(t),DOM.addClass(this.element,this.settings.class)}},{key:"draw",value:function(){if(!DOM.find("#Turbo-eCommerce-Filter")&&!this.settings.no_css){var t=this.settings.width?"width:"+this.settings.width+";":"",e=this.settings.min_width||"200px",n=this.settings.height||"auto",i="\n\t\t\t"+this.settings.element+" {\n\t\t\t\tposition: relative;\n\t\t\t\tmargin: 5px 5px;\n\t\t\t\tborder: 1px solid #e4e4e4;\n\t\t\t\t"+t+"\n\t\t\t\tmin-width: "+e+";\n\t\t\t\theight: "+n+";\n\t\t\t\tmin-height: 200px;\n\t\t\t\tcolor: #ffffff;\n\t\t\t\toverflow: hidden;\n\t\t\t}\n\n\t\t";DOM.addStyle("Turbo-eCommerce-Filter",i)}}}]),n}(),defaultSettings$3={element:".details",no_css:!1},Container$2=void 0,EventManager$3=void 0,Http$1=void 0,Details=function(t){function s(t,e,n){_classCallCheck(this,s);var i=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));return Container$2=t,Http$1=e,EventManager$3=n,i}return _inherits(s,BaseComponent),_createClass(s,[{key:"setup",value:function(t){if("object"!=(void 0===t?"undefined":_typeof(t)))throw new InvalidArgumentException$1;this.settings=Common.extend(defaultSettings$3,t),document.addEventListener("DOMContentLoaded",function(){this.setElement(this.settings.element),this.hide(),this.draw()}.bind(this))}},{key:"setElement",value:function(t){this.element=DOM.find(t),this.element&&DOM.addClass(this.element,this.settings.class)}},{key:"changeUrl",value:function(){Url.change("checkout")}},{key:"draw",value:function(){if(!DOM.find("#Turbo-eCommerce-Details")&&!this.settings.no_css){this.settings.fixed;var t="\n\t\t\t"+this.settings.element+" {\n\t\t\t\twidth: 100%;\n\t\t\t\tmin-height: 400px;\n\t\t\t\tborder: 1px solid #e4e4e4;\n\t\t\t}\n\t\t";DOM.addStyle("Turbo-eCommerce-Details",t)}}},{key:"hideAll",value:function(){Container$2.Components.booted.forEach(function(t){"Details"!=t.constructor.name&&t.hide()})}}]),s}(),defaultSettings$4={element:".checkout",no_css:!1},Container$3=void 0,EventManager$4=void 0,Http$2=void 0,Checkout=function(t){function s(t,e,n){_classCallCheck(this,s);var i=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));return Container$3=t,Http$2=e,EventManager$4=n,i}return _inherits(s,BaseComponent),_createClass(s,[{key:"setup",value:function(t){if("object"!=(void 0===t?"undefined":_typeof(t)))throw new InvalidArgumentException$1;this.settings=Common.extend(defaultSettings$4,t),document.addEventListener("DOMContentLoaded",function(){this.setElement(this.settings.element),this.hide(),this.draw()}.bind(this))}},{key:"setElement",value:function(t){this.element=DOM.find(t),this.element&&DOM.addClass(this.element,this.settings.class)}},{key:"changeUrl",value:function(){Url.change("checkout")}},{key:"draw",value:function(){if(!DOM.find("#Turbo-eCommerce-Checkout")&&!this.settings.no_css){this.settings.fixed;var t="\n\t\t\t"+this.settings.element+" {\n\t\t\t\twidth: 100%;\n\t\t\t\tmin-height: 400px;\n\t\t\t\tborder: 1px solid #e4e4e4;\n\t\t\t}\n\t\t";DOM.addStyle("Turbo-eCommerce-Checkout",t)}}},{key:"hideAll",value:function(){Container$3.Components.booted.forEach(function(t){"Checkout"!=t.constructor.name&&t.hide()})}}]),s}(),defaultSettings$5={element:".products",class:"",item_class:"",add_button_class:"btn btn-primary",favorite_button_class:"btn btn-danger",width:"200px",height:"250px",attributes:["name","price","deliveryTime","image"],url:"products.php",no_css:!1,currency:"$"},Container$4=void 0,EventManager$5=void 0,Http$3=void 0,chunkedProducts=void 0,Products=function(t){function s(t,e,n){_classCallCheck(this,s);var i=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));return Container$4=t,Http$3=e,EventManager$5=n,chunkedProducts=[],i}return _inherits(s,BaseComponent),_createClass(s,[{key:"setup",value:function(t){if("object"!=(void 0===t?"undefined":_typeof(t)))throw new InvalidArgumentException$1;this.settings=Common.extend(defaultSettings$5,t),this.totalItems=null,document.addEventListener("DOMContentLoaded",function(){this.setElement(this.settings.element),this.draw(),this.loadProducts(1)}.bind(this))}},{key:"loadProducts",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(Container$4.Pagination&&Container$4.Pagination.booted){var n=Container$4.Pagination.settings.per_page;switch(Container$4.Pagination.settings.processing){case"client-side":return this.loadPageProductsOnce(t,n,e);case"server-side":return this.loadPageProducts(t,n,e);default:throw new InvalidArgumentException$1("for processing you can choose 'server-side' or 'client-side' options.")}}else this.loadPageProducts()}},{key:"loadPageProducts",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=this.getProducts(t);return n.then(function(t){this.currentItems=e?t.slice(0,e):t,this.replaceProducts(this.currentItems),Promise.resolve(this.currentItems)}.bind(this)).catch(function(t){}),n}},{key:"loadPageProductsOnce",value:function(n,t){var i=2<arguments.length&&arguments[2]!==t&&arguments[2];return(null==this.totalItems?this.getProducts():Promise.resolve(this.totalItems)).then(function(t){this.totalItems=t;var e=this.calculateClientPages(t);return this.currentItems=e[n-1],void 0===this.currentItems?null:(i?this.appendProducts(this.currentItems):this.replaceProducts(this.currentItems),this.currentItems)}.bind(this)).catch(function(t){})}},{key:"calculateClientPages",value:function(t){Container$4.Pagination.settings.total_items=t.length;var e=Container$4.Pagination.settings.per_page;return 0!=chunkedProducts.length?chunkedProducts:chunkedProducts=Common.array_chunk(t,e)}},{key:"setElement",value:function(t){this.element=DOM.find(t),this.element&&DOM.addClass(this.element,this.settings.class)}},{key:"replaceProducts",value:function(t){if(!Array.isArray(t)||t.length<=0&&"string"==typeof t[0])throw new InvalidArgumentException$1;var e=this.buildProducts(t,this.settings.item_class,"div");return this.element.innerHTML="",e.forEach(function(t){EventManager$5.publish("products.loading",t),this.element.appendChild(t)}.bind(this)),EventManager$5.publish("products.loaded",e),e}},{key:"appendProducts",value:function(t){if(!Array.isArray(t)||t.length<=0&&"string"==typeof t[0])throw new InvalidArgumentException$1;var e=this.buildProducts(t,this.settings.item_class,"div");return e.forEach(function(t){EventManager$5.publish("products.loading",t),this.element.appendChild(t)}.bind(this)),EventManager$5.publish("products.loaded",e),e}},{key:"getProducts",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=t?this.settings.url+"?page="+t:this.settings.url;return Http$3.get({url:e})}},{key:"buildProducts",value:function(t,n,i){if("Array"!=t.constructor.name)throw new InvalidArgumentException$1;var s=[];return-1==this.settings.attributes.indexOf("currency")&&this.settings.attributes.push("currency"),t.forEach(function(t){var e=this.buildProduct(t,n,i);s.push(e)}.bind(this)),s}},{key:"buildProduct",value:function(e,t,n){if("object"!=(void 0===e?"undefined":_typeof(e))||"string"!=typeof n)throw new InvalidArgumentException$1;t=t||null;var i=DOM.createElement("div",{class:"product"});DOM.addClass(i,t);var s=DOM.createElement("div",{class:"product-overlay"});if(i.appendChild(s),(e=this.addDefaultAttributes(e)).hasOwnProperty("image")){var o=DOM.createElement("img",{src:e.image}),r=DOM.createElement(n,{class:"product-image",html:o.outerHTML});i.appendChild(r)}if(e.hasOwnProperty("price")){var a=DOM.createElement(n,{class:"product-price"}),c=DOM.createElement("span",{class:"product-amount",html:e.price.amount}),l=DOM.createElement("span",{class:"product-currency",html:e.price.currency});a.appendChild(c),a.appendChild(l),s.appendChild(a)}for(var u in e)if(Common.in_array(u,this.settings.attributes)&&"price"!=u&&"image"!=u){var d=DOM.createElement(n);d.innerHTML=e[u]||"",DOM.addClass(d,"product-"+Str.kebabCase(u)),s.appendChild(d)}var h=DOM.createElement("div",{class:"action-buttons"}),p=DOM.createElement("button",{class:"add-to-cart",type:"button",text:"+"}),f=DOM.createElement("button",{class:"favorite",type:"button",text:"&hearts;"});return this.settings.add_button_class&&DOM.addClass(p,this.settings.add_button_class),this.settings.favorite_button_class&&DOM.addClass(f,this.settings.favorite_button_class),h.appendChild(p),h.appendChild(f),p.addEventListener("click",function(t){t.preventDefault(),EventManager$5.publish("cart.product.added",e)}),f.addEventListener("click",function(t){t.preventDefault(),this.innerHTML="&#x2713;",EventManager$5.publish("cart.product.favorited",e)}),s.appendChild(h),i}},{key:"addDefaultAttributes",value:function(t){return t.hasOwnProperty("price")&&"object"!=_typeof(t.price)&&(t.price={amount:t.price,currency:this.settings.currency}),t}},{key:"draw",value:function(){if(!DOM.find("#Turbo-eCommerce-Products")&&!this.settings.no_css){var t=this.settings.width||"auto",e=this.settings.height||"200px",n="\n\t\t\t.product {\n\t\t\t\tposition: relative;\n\t\t\t\tmargin: 5px 5px;\n\t\t\t\tborder: 1px solid #e4e4e4;\n\t\t\t\twidth: "+t+";\n\t\t\t\tmin-width: "+(this.settings.min_width||"200px")+";\n\t\t\t\tmax-width: "+(this.settings.max_width||"250px")+";\n\t\t\t\theight: "+e+";\n\t\t\t\tcursor: pointer;\n\t\t\t\tcolor: #ffffff;\n\t\t\t\toverflow: hidden;\n\t\t\t}\n\n\t\t\t.product > .product-overlay {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\topacity: 0.5;\n\t\t\t\tz-index: 5;\n\t\t\t\ttransition: 1s all;\n\t\t\t\ttransform: translateX(-250px);\n\t\t\t}\n\n\t\t\t.product:hover > .product-overlay {\n\t\t\t\tbackground: rgba(0, 0, 0, 0.45);\n\t\t\t\ttransform: translateX(0px);\n\t\t\t\topacity: 1;\n\t\t\t\ttransition: 0.5s all;\n\t\t\t}\n\n\t\t\t.product > .product-image > img {\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0;\n\t\t\t\ttop: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t}\n\n\t\t\t.product > .product-overlay > .product-name, \n\t\t\t.product > .product-overlay > .product-price,\n\t\t\t.product > .product-overlay > .product-delivery-time {\n\t\t\t\tz-index: 1;\n\t\t\t\tposition: relative;\n\t\t\t\ttext-align: center;\n\t\t\t\tmargin-top: 25px;\n\t\t\t}\n\n\t\t\t.product > .product-overlay > .action-buttons {\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-top: 10px;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\n\t\t\t.product > .product-overlay > .action-buttons > .favorite {\n\t\t\t\tmargin-left: 10px;\n\t\t\t}\n\n\t\t";DOM.addStyle("Turbo-eCommerce-Products",n)}}},{key:"hideAll",value:function(){Container$4.Components.booted.forEach(function(t){"Products"!=t.constructor.name&&t.hide()})}}]),s}(),Services=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,BaseComponent),e}(),defaultMessage$4="Sorry, no more pages.",NotInPageRangeException=function(t){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,n),t=t||defaultMessage$4;var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return _get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"stackTrace",e).call(e,e,t),e}return _inherits(n,ExceptionHandler),n}(),defaultSettings$6={element:".pagination-links",processing:"client-side",class:"",per_page:5,total_items:5,url_parameter:"page",separator:"#",scroll:!1},Container$5=void 0,Products$2=void 0,EventManager$6=void 0,Pagination=function(t){function s(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;3<arguments.length&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,s);var i=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));return Container$5=t,Products$2=n,EventManager$6=e,i}return _inherits(s,BaseComponent),_createClass(s,[{key:"setup",value:function(t){if("object"!=(void 0===t?"undefined":_typeof(t)))throw new InvalidArgumentException$1;this.settings=Common.extend(defaultSettings$6,t),this.setCurrent(1),document.addEventListener("DOMContentLoaded",function(){this.setElement(this.settings.element),this.totalPages=this.calculateTotalPages(this.settings.per_page,this.settings.total_items),this.buildPagination()}.bind(this))}},{key:"buildPagination",value:function(){1!=this.settings.scroll?(this.links=this.createLinks(),this.replaceLinks(this.links),this.bindEventListeners(this.links)):window.onscroll=this.monitorScrolling.bind(this)}},{key:"setElement",value:function(t){this.element=DOM.find(t),DOM.addClass(this.element,this.settings.class)}},{key:"replaceLinks",value:function(t){this.element.innerHTML="",this.element.appendChild(t)}},{key:"calculateTotalPages",value:function(t,e){return t=parseInt(t),e=parseInt(e),Math.ceil(e/t)}},{key:"monitorScrolling",value:function(t){var e=DOM.scrollYOffset();if(DOM.documentHeight()-DOM.windowHeight()-e<=50){var n=this.current+1;Products$2&&Products$2.booted&&Products$2.loadProducts(n,!0).then(function(t){t&&this.setCurrent(n)}.bind(this))}}},{key:"bindEventListeners",value:function(t){var n=this;this.next.childNodes[0].onclick=function(t){t.preventDefault();var e=n.current+1;if(n.notInPageRange(e))throw new NotInPageRangeException("The page you requesting does not exists");Products$2&&Products$2.booted&&Products$2.loadProducts(e).then(function(t){n.setCurrent(e)})},this.previous.childNodes[0].onclick=function(t){t.preventDefault();var e=n.current-1;if(n.notInPageRange(e))throw new NotInPageRangeException("The page you requesting does not exists");Products$2&&Products$2.booted&&Products$2.loadProducts(e).then(function(t){n.setCurrent(e)})};for(var e=0;e<this.pages.length;e++)this.pages[e].childNodes[0].onclick=function(t){t.preventDefault();var e=this.getAttribute("data-page-nr");Products$2&&Products$2.booted&&Products$2.loadProducts(e).then(function(t){n.setCurrent(e)})}}},{key:"setCurrent",value:function(t){this.current=parseInt(t),this.changeUrl(t),this.setActiveLink(t)}},{key:"getCurrent",value:function(){return this.current}},{key:"createLinks",value:function(){var e=document.createElement("ul");return this.pages=this.createPageLinks(),this.previous=this.createPreviousButton(),this.next=this.createNextButton(),e.className="pagination",e.appendChild(this.previous),this.pages.forEach(function(t){e.appendChild(t)}),e.appendChild(this.next),e}},{key:"createPageLinks",value:function(){for(var t=[],e=1;e<=this.totalPages;e++){var n=document.createElement("li"),i=document.createElement("a");n.className=this.current==e?"page-item active":"page-item",i.className="page-link",i.setAttribute("href","?page="+e),i.setAttribute("data-page-nr",e),i.innerHTML=e,n.appendChild(i),t.push(n)}return t}},{key:"createPreviousButton",value:function(){var t=document.createElement("li"),e=document.createElement("a"),n=document.createElement("span"),i=document.createElement("span");return t.className="page-item",e.className="page-link",i.className="sr-only",e.setAttribute("href",""),e.setAttribute("aria-label","Previous"),n.setAttribute("aria-hidden","true"),n.innerHTML="&laquo;",i.innerHTML="Previous",e.appendChild(n),e.appendChild(i),t.appendChild(e),t}},{key:"createNextButton",value:function(){var t=document.createElement("li"),e=document.createElement("a"),n=document.createElement("span"),i=document.createElement("span");return t.className="page-item",e.className="page-link",i.className="sr-only",e.setAttribute("href",""),e.setAttribute("aria-label","Next"),n.setAttribute("aria-hidden","true"),n.innerHTML="&raquo;",i.innerHTML="Next",e.appendChild(n),e.appendChild(i),t.appendChild(e),t}},{key:"notInPageRange",value:function(t){return t>this.totalPages||t<=0||isNaN(t)}},{key:"changeUrl",value:function(t){Url.changeParameter(this.settings.url_parameter,t,this.settings.separator)}},{key:"setActiveLink",value:function(t){for(var e in this.pages)this.pages[e].childNodes[0].getAttribute("data-page-nr")==t?DOM.addClass(this.pages[e],"active"):DOM.removeClass(this.pages[e],"active")}},{key:"reset",value:function(){this.setCurrent(1),this.changeUrl(1)}}]),s}(),defaultMessage$5="In order to use components you must register them with the shop!",ComponentNotRegisteredException=function(t){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,n),t=t||defaultMessage$5;var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return _get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"stackTrace",e).call(e,e,t),e}return _inherits(n,ExceptionHandler),n}(),ComponentsProvider=function(){function e(t){_classCallCheck(this,e),this.container=t,this.components={},this.components.Filter={},this.components.Services={},this.components.Products={},this.components.Pagination={},this.components.Cart={},this.components.Checkout={},this.components.Details={}}return _createClass(e,[{key:"register",value:function(t){this.available=t,this.booted=[],this.components.Filter.booted=!1,this.components.Services.booted=!1,this.components.Products.booted=!1,this.components.Pagination.booted=!1,this.components.Cart.booted=!1,this.components.Checkout.booted=!1,this.components.Details.booted=!1;var s=this;this.container.bind("Filter",function(t,e){return s.components[e]=new Filter(t),s.components[e].booted=!0,s.booted.push(s.components[e]),s.components[e]},"components"),this.container.bind("Services",function(t,e){return s.components[e]=new Services(t),s.components[e].booted=!0,s.booted.push(s.components[e]),s.components[e]},"components"),this.container.bind("Products",function(t,e){return s.components[e]=new Products(t,t.Request,t.Events),s.components[e].booted=!0,s.booted.push(s.components[e]),s.components[e]},"components"),this.container.bind("Pagination",function(t,e){var n=s.exists("Products")?s.components.Products:null,i=s.exists("Services")?s.components.Services:null;return s.components[e]=new Pagination(t,t.Events,n,i),s.components[e].booted=!0,s.booted.push(s.components[e]),s.components[e]},"components"),this.container.bind("Cart",function(t,e){return s.components[e]=new Cart(t,t.Request,t.Events),s.components[e].booted=!0,s.booted.push(s.components[e]),s.components[e]},"components"),this.container.bind("Checkout",function(t,e){return s.components[e]=new Checkout(t,t.Request,t.Events),s.components[e].booted=!0,s.booted.push(s.components[e]),s.components[e]},"components"),this.container.bind("Details",function(t,e){return s.components[e]=new Details(t,t.Request,t.Events),s.components[e].booted=!0,s.booted.push(s.components[e]),s.components[e]},"components")}},{key:"provide",value:function(t){if(Common.in_array(t,this.available))return this.container.make(t);throw new ComponentNotRegisteredException("components must be registered in order to use them.")}},{key:"exists",value:function(t){return this.components.hasOwnProperty(t)}}]),e}(),defaultMessage$6="Trying to bind an already existing bound.",InvalidBindingException=function(t){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,n),t=t||defaultMessage$6;var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return _get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"stackTrace",e).call(e,e,t),e}return _inherits(n,ExceptionHandler),n}(),Container$6=function(){function t(){_classCallCheck(this,t),this.instances=[],this.register(),this.registerProviders(),this.registerRouter()}return _createClass(t,[{key:"bind",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if("string"!=typeof t)throw new InvalidArgumentException$1("bind() expects the first parameter to be string, but "+(void 0===t?"undefined":_typeof(t))+" was passed instead.");if("function"!=typeof e)throw new InvalidArgumentException$1("bind() expects the second parameter to be a function, but "+(void 0===e?"undefined":_typeof(e))+" was passed instead.");n?(void 0===this[n]&&(this[n]={}),this[n][t]=e.bind(e,this,t)):this[t]=e.bind(e,this,t)}},{key:"setInstance",value:function(t,e){2<arguments.length&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t)throw new InvalidArgumentException$1("setInstace() expects the first parameter to be a string, but "+(void 0===t?"undefined":_typeof(t))+" was passed instead.");if("object"!=(void 0===e?"undefined":_typeof(e)))throw new InvalidArgumentException$1("setInstance() expects the second parameter to be an object, but "+(void 0===e?"undefined":_typeof(e))+" was passed instead.");this.instances[t]=e,this[t]=e}},{key:"getInstance",value:function(t){if("string"!=typeof t&&"object"!=(void 0===t?"undefined":_typeof(t)))throw new InvalidArgumentException$1("getInstace() expects the first parameter to be a string, but "+(void 0===t?"undefined":_typeof(t))+" was passed instead.");return"object"==(void 0===t?"undefined":_typeof(t))?this.instances[t.constructor.name]||null:this.instances[t]||null}},{key:"instanceExist",value:function(t){if("object"==(void 0===t?"undefined":_typeof(t))||"symbol"==(void 0===t?"undefined":_typeof(t)))return void 0!==this.instances[t.constructor.name];if("string"==typeof t)return void 0!==this.instances[t];throw new InvalidArgumentException$1("instanceExist() expects the first parameter to be string or an object, but "+(void 0===t?"undefined":_typeof(t))+" was passed instead.")}},{key:"make",value:function(t){var e={},n=void 0;if(this.instanceExist(t))return this.getInstance(t);if("object"==(void 0===t?"undefined":_typeof(t)))n=(e=t).constructor.name,this.setInstance(n,e);else if("string"==typeof t&&this.hasOwnProperty(t))e=new this[t],n=t,this.setInstance(n,e);else{if("string"!=typeof t||!this.Components.exists(t))throw new InvalidBindingException("Container.make() could not create the object!");e=new this.components[t],n=t,this.setInstance(n,e)}return e}},{key:"flush",value:function(){this.instances=[]}},{key:"register",value:function(){this.setInstance("Request",new Request),this.setInstance("Events",new EventManager)}},{key:"registerProviders",value:function(){this.setInstance("Components",new ComponentsProvider(this))}},{key:"registerRouter",value:function(){this.setInstance("Router",new Router(this))}}]),t}(),defaultSettings$7={debug_level:"error",element:"body",inject_libraries:[],components:["Products","Services","Filter","Pagination","Cart"],loading_animation:!0,hash_navigation:!1},externalLibraries={bootstrap:"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"},TurboEcommerce=function(){function e(t){if(_classCallCheck(this,e),"object"!=(void 0===t?"undefined":_typeof(t)))throw new InvalidArgumentException$1;return this.settings=Common.extend(defaultSettings$7,t),ExceptionHandler.setDebugLevel=this.settings.debug_level,this.loadExternalLibraries(),this.container=new Container$6,this.components=this.container.make("Components"),this.components.register(this.settings.components),document.addEventListener("DOMContentLoaded",function(){this.setElement(this.settings.element),this.container.Router.hashNavigation(this.settings.hash_navigation).register(),this.settings.loading_animation&&startLoading.call(this),this.addStyleTag()}.bind(this)),new Proxy(this,{get:function(t,e){return t.components.exists(e)?t.components.provide(e):t.container.instanceExist(e)?t.container.getInstance(e):void 0}})}return _createClass(e,[{key:"loadExternalLibraries",value:function(){var t=void 0,e=this.settings.inject_libraries;for(t=0;t<e.length;t++)if(externalLibraries.hasOwnProperty(e[t])){var n="Turbo-eCommerce-"+Str.ucfirst(e[t]);DOM.find(n)||DOM.addLinkedStyle(n,externalLibraries[e[t]])}}},{key:"setElement",value:function(t){this.element=DOM.find(t),DOM.addClass(this.element,this.settings.class)}},{key:"addStyleTag",value:function(){if(!DOM.find("#Turboe-Commerce")){var t="\n\t\t\t"+this.settings.element+" {\n\t\t\t\tposition: relative;\n\t\t\t\tclear: both;\n\t\t\t}\n\n\t\t\t.loading-progress-bar {\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 5px;\n\t\t\t\twidth: 100%;\n\t\t\t\t-webkit-box-shadow: 0px 0px 5px 1px rgba(168,168,168,1);\n\t\t\t\t-moz-box-shadow: 0px 0px 5px 1px rgba(168,168,168,1);\n\t\t\t\tbox-shadow: 0px 0px 5px 1px rgba(168,168,168,1);\n\t\t\t}\n\n\t\t\t.loading-progress-bar > .loading-progress-fill {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tposition: absolute;\n\t\t\t\tbackground-color: #9dd2ff;\n\t\t\t\ttransform: translateX(-"+document.documentElement.clientWidth+"px);\n\t\t\t}\n\t\t";DOM.addStyle("Turbo-eCommerce",t)}}}]),e}();function startLoading(){var t=DOM.createElement("div",{class:"loading-progress-bar"}),e=DOM.createElement("span",{class:"loading-progress-fill"});t.appendChild(e),document.body.appendChild(t);var n=document.documentElement.clientWidth,i=.8*document.documentElement.clientWidth;window.requestAnimationFrame(function t(){e.style.transform="translateX(-"+n+"px)";n-=7;if(n<i)return void o();window.requestAnimationFrame(t)});var s=this.element;function o(){if(e.style.opacity=n/1e3,e.style.transform="translateX(-"+n+"px)",(n-=15)<=0)return s.style.display="block",void(void 0!==t&&DOM.remove(t));window.requestAnimationFrame(o)}s.style.display="none"}module.exports=TurboEcommerce;