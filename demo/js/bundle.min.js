"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var TurboeCommerce=function(){var t=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return console.error("InvalidArgumentException, an invalid argument was passed."),t}return _inherits(e,Error),e}(),e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"minifyCss",value:function(t){return t=(t=(t=(t=(t=t.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"")).replace(/ {2,}/g," ")).replace(/([{:}])/g,"$1")).replace(/([;,]) /g,"$1")).replace(/ !/g,"!")}},{key:"switchClasses",value:function(t,e,n){this.removeClass(t,e),this.addClass(t,n)}},{key:"addClass",value:function(e,n){if(null===e)throw new t;return n&&""!=n&&void 0!==(void 0===n?"undefined":_typeof(n))?(n.split(" ").forEach(function(t){e.classList.add(t)}),e):e}},{key:"removeClass",value:function(e,n){if(null==e)throw new t;""==n?e.className="":n.split(" ").forEach(function(t){e.classList.remove(t)});return e}},{key:"addStyle",value:function(e,n){if("string"!=typeof n)throw new t;var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style"),s=this.minifyCss(n);r.innerHTML=s,r.setAttribute("id",e),i.appendChild(r)}},{key:"createElement",value:function(t,e){var n=document.createElement(t);if(void 0===e)return n;for(var i in e)"text"!=i?n.setAttribute(i,e[i]):n.innerHTML=e[i];return n}},{key:"toggleClass",value:function(e,n,i){if(null==e||void 0===e)throw new t;return(i=i||void 0)&&e.classList.toggle(i),e.classList.toggle(n)}},{key:"find",value:function(t){return function(t,e){var n=e.querySelectorAll(t);if(0==n.length)return null;return n.length>1?n:n[0]}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document)}}]),e}();var n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"extend",value:function(t,e){var n,i={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}},{key:"in_array",value:function(e,n){if(n.constructor!==Array)throw new t;for(var i=0;i<=n.length;i++)if(e==n[i])return!0;return!1}},{key:"emptyObject",value:function(t){for(var e in t)return!1;return!0}},{key:"containsObject",value:function(t,e){var n=void 0;for(n=0;n<e.length;n++){if("string"==typeof t&&e[n].constructor.name===t)return!0;if(e[n]===t)return!0}return!1}},{key:"isObject",value:function(t){return"object"==(void 0===t?"undefined":_typeof(t))}}]),e}(),i=(function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}_inherits(e,Error)}(),{headers:{"Content-Type":"application/json"},async:!0}),r=function(){function t(e){_classCallCheck(this,t),this.xhr=new XMLHttpRequest||new ActiveXObject("Microsoft.XMLHTTP"),this.settings=n.extend(i,e),this.setDefaultRequestHeader()}return _createClass(t,[{key:"setDefaultRequestHeader",value:function(){var t=void 0,e=this.settings.headers,n=this.settings.async,i=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.open=function(){var r=i.apply(this,arguments,n);for(t in e)this.setRequestHeader(t,e[t]);return r}}},{key:"post",value:function(t){var e=this.xhr;return t.hasOwnProperty("before")&&"function"==typeof t.before&&t.before.call(this),new Promise(function(n,i){if("object"!==(void 0===t?"undefined":_typeof(t)))throw new Error("get expecting a json object to be passed as an argument, but "+(void 0===t?"undefined":_typeof(t))+" was passed.");if(t.data=t.data||{},"object"!==_typeof(t.data))throw new Error("data property expecting a json object to be passed as an argument, but "+_typeof(t.data)+" was passed.");e.open("POST",t.url,!0),e.responseType=t.dataType||"json",e.timeout=t.timeout||3e3,e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(n(this.response),t.hasOwnProperty("after")&&"function"==typeof t.after&&t.after.call(this))},e.onerror=function(e){t.error(e),i(e)},t.data||e.send(null);var r=Object.keys(t.data).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t.data[e])}).join("&");e.send(r)})}},{key:"get",value:function(t){var e=this.xhr;return t.hasOwnProperty("before")&&"function"==typeof t.before&&t.before.call(this),new Promise(function(n,i){if("object"!==(void 0===t?"undefined":_typeof(t)))throw new Error("get expecting a json object to be passed as an argument, but "+(void 0===t?"undefined":_typeof(t))+" was passed.");if(t.data=t.data||{},"object"!==_typeof(t.data))throw new Error("data property expecting a json object to be passed as an argument, but "+_typeof(t.data)+" was passed.");e.open("GET",t.url,!0),e.responseType=t.dataType||"json",e.timeout=t.timeout||3e3,e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(n(this.response),t.hasOwnProperty("after")&&"function"==typeof t.after&&t.after.call(this))},e.onerror=function(e){t.error(e),i(e)},t.data||e.send(null);var r=Object.keys(t.data).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t.data[e])}).join("&");e.send(r)})}}]),t}(),s=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return console.error("InvalidBindingException, trying to bind an already existing bound."),t}return _inherits(e,Error),e}(),o=[],a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"bind",value:function(e,n){if("string"!=typeof e||"function"!=typeof n)throw new t;if(void 0!==this[e])throw new s;this[e]=n.bind(n,this)}},{key:"setInstance",value:function(e,n){if("string"!=typeof e||"object"!=(void 0===n?"undefined":_typeof(n)))throw new t;o[e]=n}},{key:"getInstance",value:function(e){if("string"!=typeof e)throw new t;return"object"==(void 0===e?"undefined":_typeof(e))?o[e.constructor.name]||null:o[e]||null}},{key:"instanceExist",value:function(e){if("object"==(void 0===e?"undefined":_typeof(e)))return void 0!==o[e.constructor.name];if("string"==typeof e)return void 0!==o[e];throw new t}},{key:"make",value:function(t){var e={},n=void 0;if(this.instanceExist(t))return this.getInstance(t);if("object"==(void 0===t?"undefined":_typeof(t)))e=t,n=t.constructor.name,this.setInstance(n,e);else{if("string"!=typeof t||!this.hasOwnProperty(t))throw new s;e=new this[t],n=t,this.setInstance(n,e)}return e}},{key:"instances",value:function(){return o}}]),e}(),c="The event you called does not exists or you supplied wrong argument",l=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return console.error("BadEventCallException: "+t||c),n}return _inherits(e,Error),e}(),u={},h=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"subscribe",value:function(t,e){if("function"!=typeof e)throw new InvalidArgumentException;void 0===u[t]&&(u[t]=[]),u[t].push(e)}},{key:"publish",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n=n||null,void 0!==u[t]&&u[t].forEach(function(t){if("function"!=typeof t)throw new InvalidArgumentException("listen() should recieve callback as second parameter, but "+(void 0===t?"undefined":_typeof(t))+" was passed");return t.apply(void 0,_toConsumableArray(n))})}}]),t}(),d=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return console.error("ComponentsException, expecting for at least one components, but none was given, \n\t\t\t\t\t\t\t\tplease add at least one requirement(Products, Services or/and Filter."),t}return _inherits(e,Error),e}(),p=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return console.error("NotInPageRangeException, sorry, no more pages."),t}return _inherits(e,Error),e}(),f="In order to use components you must register them with the shop!",v=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return console.error("ComponentNotRegisteredException: "+t||f),n}return _inherits(e,Error),e}(),g=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,Error),_createClass(n,null,[{key:"initalize",value:function(){window.onerror=function(e,n,i,r,o){if(o instanceof t);else if(o instanceof s);else if(o instanceof l);else if(o instanceof d);else if(o instanceof v);else if(!(o instanceof p))return!1;return!0}}}]),n}(),m=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"kebabCase",value:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},{key:"random",value:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}}]),t}(),y=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"set",value:function(t,e,n){"Object"!=e.constructor.name&&"Array"!=e.constructor.name||(e=JSON.stringify(e));var i=void 0;if(n=n||10){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i="; expires="+r.toGMTString()}else i="";document.cookie=t+"="+e+i+"; path=/"}},{key:"get",value:function(t){if(document.cookie.length>0){var e=document.cookie.indexOf(t+"=");if(-1!=e){e=e+t.length+1;var n=document.cookie.indexOf(";",e);return-1==n&&(n=document.cookie.length),JSON.parse(unescape(document.cookie.substring(e,n)))}}return{}}}]),t}(),b={element:".cart",cookie_name:"cart",preview_class:"",loader:"/images/icons/spinner.svg",class:"",width:"60px",height:"60px",placement:"right-top",fixed:!0,hover_color:"orange"},w=void 0,C=void 0,k=function(){function i(t,e){_classCallCheck(this,i),t,e,this.previewElement=this.createPreviewElement(),this.svgIcon=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("version","1.1"),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.setAttribute("x","0px"),t.setAttribute("y","0px"),t.setAttribute("width","446.843px"),t.setAttribute("height","446.843px"),t.setAttribute("viewBox","0 0 446.843 446.843"),t.setAttribute("style","enable-background:new 0 0 446.843 446.843;"),t.setAttribute("xml:space","preserve"),n.setAttribute("d","M444.09,93.103c-2.698-3.699-7.006-5.888-11.584-5.888H109.92c-0.625,0-1.249,0.038-1.85,0.119l-13.276-38.27c-1.376-3.958-4.406-7.113-8.3-8.646L19.586,14.134c-7.374-2.887-15.695,0.735-18.591,8.1c-2.891,7.369,0.73,15.695,8.1,18.591l60.768,23.872l74.381,214.399c-3.283,1.144-6.065,3.663-7.332,7.187l-21.506,59.739c-1.318,3.663-0.775,7.733,1.468,10.916c2.24,3.183,5.883,5.078,9.773,5.078h11.044c-6.844,7.616-11.044,17.646-11.044,28.675c0,23.718,19.298,43.012,43.012,43.012s43.012-19.294,43.012-43.012c0-11.029-4.2-21.059-11.044-28.675h93.776c-6.847,7.616-11.048,17.646-11.048,28.675c0,23.718,19.294,43.012,43.013,43.012c23.718,0,43.012-19.294,43.012-43.012c0-11.029-4.2-21.059-11.043-28.675h13.433c6.599,0,11.947-5.349,11.947-11.948c0-6.599-5.349-11.947-11.947-11.947H143.647l13.319-36.996c1.72,0.724,3.578,1.152,5.523,1.152h210.278c6.234,0,11.751-4.027,13.65-9.959l59.739-186.387C447.557,101.567,446.788,96.802,444.09,93.103z M169.659,409.807c-10.543,0-19.116-8.573-19.116-19.116s8.573-19.117,19.116-19.117s19.116,8.574,19.116,19.117S180.202,409.807,169.659,409.807z M327.367,409.807c-10.543,0-19.117-8.573-19.117-19.116s8.574-19.117,19.117-19.117c10.542,0,19.116,8.574,19.116,19.117S337.909,409.807,327.367,409.807z M402.52,148.149h-73.161V115.89h83.499L402.52,148.149z M381.453,213.861h-52.094v-37.038h63.967L381.453,213.861z M234.571,213.861v-37.038h66.113v37.038H234.571z M300.684,242.538v31.064h-66.113v-31.064H300.684z M139.115,176.823h66.784v37.038h-53.933L139.115,176.823z M234.571,148.149V115.89h66.113v32.259H234.571z M205.898,115.89v32.259h-76.734l-11.191-32.259H205.898z M161.916,242.538h43.982v31.064h-33.206L161.916,242.538z M329.359,273.603v-31.064h42.909l-9.955,31.064H329.359z"),e.appendChild(n),t.appendChild(e),t}.call(this)}return _createClass(i,[{key:"setup",value:function(i){if("object"!=(void 0===i?"undefined":_typeof(i)))throw new t;this.settings=n.extend(b,i),this.setElement(this.settings.element),e.addClass(this.previewElement,"closed"),e.addClass(this.previewElement,this.settings.preview_class),this.bindEventListeners(),this.addStyleTag(),this.isEmpty(y.get(this.settings.cookie_name))&&(this.cart={},this.setCart(this.cart))}},{key:"isEmpty",value:function(t){return n.emptyObject(t)}},{key:"setCart",value:function(t){this.cart.id=m.random(10),this.cart.items=[],this.cart.favorites=[],y.set(this.settings.cookie_name,t,2)}},{key:"addItem",value:function(t){this.cart=y.get(this.settings.cookie_name),this.cart.items.push(t),y.set(this.settings.cookie_name,this.cart,2)}},{key:"removeItem",value:function(t){this.cart=y.get(this.settings.cookie_name),this.cart.items.splice(this.cart.items.indexOf(t),1),y.set(this.settings.cookie_name,this.cart,2)}},{key:"addToPreview",value:function(t){C.innerHTML="";for(var n=0;n<t.length;n++){var i=e.createElement("li",{class:"item"}),r=t[n];for(var s in r){var o=e.createElement("span",{text:r[s]});i.appendChild(o)}C.appendChild(i)}}},{key:"setElement",value:function(t){this.icon=e.find(t),this.icon&&(e.addClass(this.icon,this.settings.class),e.addClass(this.icon,this.settings.placement),this.icon.appendChild(this.svgIcon),this.icon.appendChild(this.previewElement))}},{key:"createPreviewElement",value:function(){var t=e.createElement("div",{id:"preview"});return C=e.createElement("ul",{class:"items"}),t.appendChild(C),t}},{key:"addStyleTag",value:function(){if(!e.find("#eCommerce-Cart")){var t=this.settings.fixed?"fixed":"absolute",n="\n\t\t\t"+this.settings.element+" {\n\t\t\t\tposition: "+t+";\n\t\t\t\tcursor: pointer;\n\t\t\t\tcolor: #ffffff;\n\t\t\t\tz-index: 998;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" > svg {\n\t\t\t\twidth: "+this.settings.width+";\n\t\t\t\theight: "+this.settings.height+";\n\t\t\t\ttransition: fill 0.3s;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" > svg:hover {\n\t\t\t\tfill: "+this.settings.hover_color+";\n\t\t\t\ttransition: fill 0.3s;\n\t\t\t}\n\n\t\t\t"+this.settings.element+".top-right,\n\t\t\t"+this.settings.element+".right-top {\n\t\t\t\tright: 10px;\n\t\t\t\ttop: 10px;\n\t\t\t}\n\n\t\t\t"+this.settings.element+".left-top,\n\t\t\t"+this.settings.element+".top-left {\n\t\t\t\tleft: 10px;\n\t\t\t\ttop: 10px;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" > #preview {\n\t\t\t\tposition: "+t+";\n\t\t\t\tz-index: 9999;\n\t\t\t\ttop: calc(10px + "+this.settings.height+");\n\t\t\t\ttransform: translateX(60px);\n\t\t\t\theight: 400px;\n\t\t\t\twidth: 300px;\n\t\t\t\tborder: 1px solid #e4e4e4;\n\t\t\t\tbackground: #ffffff;\n\t\t\t\ttransition: transform 1s, visibility 1s;\n\t\t\t\tcursor: default;\n\t\t\t\toverflow-Y: scroll;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" > #preview.opened {\n\t\t\t\tvisibility: visible;\n\t\t\t\ttransform: translateX(-240px);\n\t\t\t}\n\n\t\t\t"+this.settings.element+" > #preview.closed {\n\t\t\t\tvisibility: hidden;\n\t\t\t\ttransform: translateX(60px);\n\t\t\t}\n\n\t\t\t"+this.settings.element+" > #preview > ul.items,\n\t\t\t"+this.settings.element+" > #preview > ul.items > li.item {\n\t\t\t\tcolor: #000000;\n\t\t\t\tlist-style-type: none;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" .items.loading {\n\t\t\t\tdisplay: none;\n\t\t\t\toverflow-Y: none;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" .cart-loader-overlay {\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: 0; \n\t\t\t    left: 0;\n\t\t\t    right: 0;\n\t\t\t    bottom: 0;\n\t\t\t\tbackground: #ffffff;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tmin-height: 100%;\n\t\t\t\toverflow: auto;\n\t\t\t}\n\n\t\t\t"+this.settings.element+" .cart-loader-overlay .cart-loader {\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 50px;\n\t\t\t\theight: 50px;\n\t\t\t\tmargin-left: -25px;\n\t\t\t\tmargin-top: -25px;\n\t\t\t\tleft: 50%;\n\t\t\t\tright: 50%;\n\t\t\t\ttop: 50%;\n\t\t\t\tbottom: 50%;\n\t\t\t}\n\t\t";e.addStyle("eCommerce-Cart",n)}}},{key:"loadingOverlay",value:function(){if(w)return w;var t=e.createElement("img",{src:this.settings.loader,class:"cart-loader"});return(w=e.createElement("div",{class:"cart-loader-overlay"})).appendChild(t),w}},{key:"previewStartLoading",value:function(){e.addClass(C,"loading"),this.previewElement.appendChild(this.loadingOverlay())}},{key:"previewStopLoading",value:function(){e.find(".cart-loader-overlay",this.previewElement)&&(this.previewElement.removeChild(this.loadingOverlay()),e.removeClass(C,"loading"))}},{key:"reloadCartPreview",value:function(){this.previewStartLoading();var t=this.getCartItems();this.addToPreview(t);var e=this;setTimeout(function(){e.previewStopLoading.call(e)},1e3)}},{key:"bindEventListeners",value:function(){null!=this.svgIcon&&(this.svgIcon.onclick=function(t){t.preventDefault(),e.toggleClass(this.previewElement,"opened","closed")&&this.reloadCartPreview()}.bind(this),h.subscribe("ProductWasAdded",function(t){var e=y.get(this.settings.cookie_name);e.items.push(t),y.set(this.settings.cookie_name,e),this.reloadCartPreview()}.bind(this)))}},{key:"getCartItems",value:function(){var t=y.get(this.settings.cookie_name);return t?t.items:[]}}]),i}();var _={element:".filter",data:{},class:"",width:"",height:""},E=function(){function i(t){_classCallCheck(this,i),t}return _createClass(i,[{key:"setup",value:function(e){if("object"!=(void 0===e?"undefined":_typeof(e)))throw new t;this.settings=n.extend(_,e),this.setElement(this.settings.element)}},{key:"setElement",value:function(t){this.wrapper=e.find(t),e.addClass(this.wrapper,this.settings.class)}}]),i}(),x={element:".products",class:"",item_class:"",add_button_class:"btn btn-primary",favorite_button_class:"btn btn-danger",width:"200px",height:"250px",attributes:["name","price","deliveryTime","image"],url:"products.php"},P=void 0,j=void 0,L=function(){function i(t,e){_classCallCheck(this,i),P=t,j=e}return _createClass(i,[{key:"setup",value:function(e){document.addEventListener("DOMContentLoaded",function(){if("object"!=(void 0===e?"undefined":_typeof(e)))throw new t;this.settings=n.extend(x,e),this.setElement(this.settings.element),this.addStyleTag(),P.Pagination&&P.Pagination.booted?this.loadPageProducts():this.loadAllProducts()}.bind(this))}},{key:"loadPageProducts",value:function(){this.getProducts(1).then(function(t){this.currentItems=t;for(var e=0;e<this.currentItems.length;e++){var n=this.currentItems[e];h.publish("AfterLoaded",n)}h.publish("ProductsWereFetched",t),this.replaceItems(t)}.bind(this)).catch(function(t){})}},{key:"loadAllProducts",value:function(){this.getProducts().then(function(t){this.currentItems=t;for(var e=0;e<this.currentItems.length;e++){var n=this.currentItems[e];h.publish("AfterLoaded",n)}h.publish("ProductsWereFetched",t),this.replaceItems(t)}.bind(this)).catch(function(t){})}},{key:"setElement",value:function(t){this.wrapper=e.find(t),this.wrapper&&e.addClass(this.wrapper,this.settings.class)}},{key:"replaceItems",value:function(e){if(!Array.isArray(e)||e.length<=0&&"string"==typeof e[0])throw new t;var n=this.buildProducts(e,this.settings.item_class,"div");return this.wrapper.innerHTML="",n.forEach(function(t){this.wrapper.appendChild(t)}.bind(this)),e}},{key:"getProducts",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=t?this.settings.url+"?page="+t:this.settings.url;return j.get({url:e})}},{key:"buildProducts",value:function(e,n,i){if("Array"!=e.constructor.name)throw new t;var r=[];return e.forEach(function(t){var e=this.buildProduct(t,n,i);r.push(e)}.bind(this)),r}},{key:"buildProduct",value:function(i,r,s){if("object"!=(void 0===i?"undefined":_typeof(i))||"string"!=typeof s)throw new t;r=r||null;var o=e.createElement("div",{class:"product"});e.addClass(o,r);var a=e.createElement("div",{class:"product-overlay"});o.appendChild(a);for(var c in i)if(n.in_array(c,this.settings.attributes)){var l=e.createElement(s);if("image"==c){var u=e.createElement("img",{src:i[c]});o.appendChild(u)}else l.innerHTML=i[c]||"";e.addClass(l,"product-"+m.kebabCase(c)),a.appendChild(l)}var d=e.createElement("div",{id:"actionButtons",class:"action-buttons"}),p=e.createElement("button",{id:"addToCart",class:this.settings.add_button_class,type:"button",text:"+"}),f=e.createElement("button",{id:"favorite",class:this.settings.favorite_button_class,type:"button",text:"&hearts;"});return d.appendChild(p),d.appendChild(f),p.addEventListener("click",function(t){t.preventDefault(),h.publish("ProductWasAdded",i)}),a.appendChild(d),o}},{key:"addStyleTag",value:function(){if(!e.find("#eCommerce-Products")){var t="\n\t\t\t.product {\n\t\t\t\tposition: relative;\n\t\t\t\tmargin: 5px 5px;\n\t\t\t\tborder: 1px solid #e4e4e4;\n\t\t\t\twidth: "+this.settings.width+";\n\t\t\t\theight: "+this.settings.height+";\n\t\t\t\tcursor: pointer;\n\t\t\t\tcolor: #ffffff;\n\t\t\t\toverflow: hidden;\n\t\t\t}\n\n\t\t\t.product > .product-overlay {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\topacity: 0.5;\n\t\t\t\tz-index: 5;\n\t\t\t\ttransition: 1s all;\n\t\t\t\ttransform: translateX(-250px);\n\t\t\t}\n\n\t\t\t.product:hover > .product-overlay {\n\t\t\t\tbackground: rgba(0, 0, 0, 0.45);\n\t\t\t\ttransform: translateX(0px);\n\t\t\t\topacity: 1;\n\t\t\t\ttransition: 1s all;\n\t\t\t}\n\n\t\t\t.product > img {\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0;\n\t\t\t\ttop: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t}\n\n\t\t\t.product > .product-image {\n\t\t\t\tz-index: 0;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t}\n\n\t\t\t.product > .product-overlay > .product-name, \n\t\t\t.product > .product-overlay > .product-price,\n\t\t\t.product > .product-overlay > .product-delivery-time {\n\t\t\t\tz-index: 1;\n\t\t\t\tposition: relative;\n\t\t\t\ttext-align: center;\n\t\t\t\tmargin-top: 25px;\n\t\t\t}\n\n\t\t\t.product > .product-overlay > .action-buttons {\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-top: 10px;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\n\t\t\t.product > .product-overlay > .action-buttons > #favorite {\n\t\t\t\tmargin-left: 10px;\n\t\t\t}\n\n\t\t";e.addStyle("eCommerce-Products",t)}}}]),i}(),A=function t(){_classCallCheck(this,t)},O={element:".pagination-links",class:"",per_page:5,total_items:10},I=void 0,T=function(){function i(t,e){_classCallCheck(this,i),this.setCurrent(1),t,I=e}return _createClass(i,[{key:"setup",value:function(e){document.addEventListener("DOMContentLoaded",function(){if("object"!=(void 0===e?"undefined":_typeof(e)))throw new t;this.settings=n.extend(O,e),this.totalPages=this.calculateTotalPages(this.settings.per_page,this.settings.total_items),this.setElement(this.settings.element),this.replaceLinks(this.links)}.bind(this))}},{key:"setElement",value:function(t){this.wrapper=e.find(t),e.addClass(this.wrapper,this.settings.class),this.links=this.createLinks(),this.bindEventListeners(this.links)}},{key:"replaceLinks",value:function(t){this.wrapper.innerHTML="",this.wrapper.appendChild(t)}},{key:"calculateTotalPages",value:function(t,e){return t=parseInt(t),e=parseInt(e),Math.ceil(e/t)}},{key:"bindEventListeners",value:function(t){var e=this;this.next.childNodes[0].onclick=function(t){t.preventDefault();var n=e.current+1;if(e.notInPageRange(n))throw new p;I.getProducts(n).then(function(t){I.replaceItems(t)}),e.setCurrent(n)},this.previous.childNodes[0].onclick=function(t){t.preventDefault();var n=e.current-1;if(e.notInPageRange(n))throw new p;I.getProducts(n).then(function(t){I.replaceItems(t)}),e.setCurrent(n)};for(var n=0;n<this.pages.length;n++)this.pages[n].childNodes[0].onclick=function(t){t.preventDefault();var n=this.getAttribute("data-page-nr");I.getProducts(n).then(function(t){I.replaceItems(t)}),e.setCurrent(n)}}},{key:"setCurrent",value:function(t){this.current=parseInt(t),this.changeUrl(t),this.setActiveLink(t)}},{key:"getCurrent",value:function(){return this.current}},{key:"createLinks",value:function(){var t=document.createElement("ul");return this.pages=this.createPageLinks(),this.previous=this.createPreviousButton(),this.next=this.createNextButton(),t.className="pagination",t.appendChild(this.previous),this.pages.forEach(function(e){t.appendChild(e)}),t.appendChild(this.next),t}},{key:"createPageLinks",value:function(){for(var t=[],e=1;e<=this.totalPages;e++){var n=document.createElement("li"),i=document.createElement("a");n.className=this.current==e?"page-item active":"page-item",i.className="page-link",i.setAttribute("href","?page="+e),i.setAttribute("data-page-nr",e),i.innerHTML=e,n.appendChild(i),t.push(n)}return t}},{key:"createPreviousButton",value:function(){var t=document.createElement("li"),e=document.createElement("a"),n=document.createElement("span"),i=document.createElement("span");return t.className="page-item",e.className="page-link",i.className="sr-only",e.setAttribute("href",""),e.setAttribute("aria-label","Previous"),n.setAttribute("aria-hidden","true"),n.innerHTML="&laquo;",i.innerHTML="Previous",e.appendChild(n),e.appendChild(i),t.appendChild(e),t}},{key:"createNextButton",value:function(){var t=document.createElement("li"),e=document.createElement("a"),n=document.createElement("span"),i=document.createElement("span");return t.className="page-item",e.className="page-link",i.className="sr-only",e.setAttribute("href",""),e.setAttribute("aria-label","Next"),n.setAttribute("aria-hidden","true"),n.innerHTML="&raquo;",i.innerHTML="Next",e.appendChild(n),e.appendChild(i),t.appendChild(e),t}},{key:"notInPageRange",value:function(t){return t>this.totalPages||t<=0||isNaN(t)}},{key:"changeUrl",value:function(t){t=t||GET_Vars().page,window.history.replaceState("","",this.updateURLParameter(window.location.href,"page",t))}},{key:"setActiveLink",value:function(t){for(var n in this.pages)this.pages[n].childNodes[0].getAttribute("data-page-nr")==t?e.addClass(this.pages[n],"active"):e.removeClass(this.pages[n],"active")}},{key:"GET_Vars",value:function(){var t={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,i){t[n]=i});return t}},{key:"updateURLParameter",value:function(t,e,n){var i="",r=t.split("?"),s=r[0],o=r[1],a="";if(o){r=o.split("&");for(var c=0;c<r.length;c++)r[c].split("=")[0]!=e&&(i+=a+r[c],a="&")}return s+"?"+i+(a+""+e+"="+n)}},{key:"reset",value:function(){this.setCurrent(1),this.changeUrl(1)}}]),i}(),S={element:"body",importBootstrap:!1,components:["Products","Services","Filter","Pagination","Cart"]};return function i(s){if(_classCallCheck(this,i),g.initalize(),"object"!=(void 0===s?"undefined":_typeof(s)))throw new t;return this.container=new a,this.settings=n.extend(S,s),this.settings.element=e.find(this.settings.element),function(t){var e=this.container.make(new r);this.container.bind("Filter",function(t){return t.Filter.booted=!0,new E(t)}),this.container.bind("Services",function(t){return t.Services.booted=!0,new A(t)}),this.container.bind("Products",function(t){return t.Products.booted=!0,new L(t,e)}),this.container.bind("Pagination",function(t){return t.Pagination.booted=!0,new T(t,t.make("Products"))}),this.container.bind("Cart",function(t){return t.Cart.booted=!0,new k(t,e)}),this.container.Filter.booted=!1,this.container.Services.booted=!1,this.container.Products.booted=!1,this.container.Pagination.booted=!1,this.container.Cart.booted=!1}.call(this,s.components),new Proxy(this,{get:function(t,e){if("Events"==e)return h;if(!n.in_array(e,s.components))throw new v("components must be registered in order to use them.");return t.container.make(e)}})}}();